# Expressions Component

## Назначение

Компонент `expressions` определяет систему деревьев выражений для обработки запросов, включая сравнения, скалярные операции, агрегации и обновления.

## Основные файлы

- `expression.hpp/cpp` - Базовый интерфейс выражений
- `compare_expression.hpp/cpp` - Операции сравнения
- `scalar_expression.hpp/cpp` - Скалярные операции
- `aggregate_expression.hpp/cpp` - Агрегатные функции
- `sort_expression.hpp/cpp` - Выражения сортировки
- `update_expression.hpp/cpp` - Выражения обновления
- `key.hpp` - Ссылки на поля/колонки
- `forward.hpp` - Предварительные объявления

## Ключевые классы и функциональность

### Базовые классы

- **`expression_i`** - Базовый интерфейс выражений с:
  - Хешированием
  - Проверкой равенства
  - Сериализацией/десериализацией

### Типы выражений

- **`compare_expression`** - Операции сравнения:
  - Равенство (=)
  - Неравенство (!=, <>)
  - Сравнение (<, >, <=, >=)

- **`scalar_expression`** - Скалярные операции:
  - Арифметические операции (+, -, *, /)
  - Строковые операции (конкатенация, подстроки)
  - Логические операции (AND, OR, NOT)

- **`aggregate_expression`** - Агрегатные функции:
  - SUM - сумма значений
  - AVG - среднее значение
  - COUNT - количество элементов
  - MIN - минимальное значение
  - MAX - максимальное значение

- **`sort_expression`** - Выражения для определения порядка сортировки:
  - ASC - по возрастанию
  - DESC - по убыванию

- **`update_expression`** - Выражения для операций обновления

### Вспомогательные классы

- **`key_t`** - Ссылка на поле/колонку в документе или таблице

- **`param_storage`** - Хранилище параметров запроса (variant type)

## Использование

Выражения используются на всех этапах обработки запроса:
- В логическом плане для представления операций
- В физическом плане для выполнения вычислений
- В оптимизаторе для преобразования запросов
