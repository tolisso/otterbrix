# Planner Component

## Назначение

Компонент `planner` оптимизирует логические планы запросов перед генерацией физического плана.

## Основные файлы

- `planner.hpp/cpp` - Реализация оптимизатора запросов

## Ключевые классы и функциональность

### Основной класс

- **`planner_t`** - Оптимизатор запросов с функциональностью:
  - Анализ логического плана
  - Применение правил оптимизации
  - Преобразование плана для повышения производительности

### Основная функция

- **`create_plan()`** - Преобразование и оптимизация логического плана:
  - Принимает исходный логический план
  - Применяет правила оптимизации
  - Возвращает оптимизированный логический план

### Оптимизации (потенциальные)

Типичные оптимизации, которые может выполнять планировщик:

1. **Предикатный pushdown** - проталкивание фильтров ближе к источникам данных
2. **Объединение фильтров** - комбинирование нескольких условий WHERE
3. **Переупорядочивание соединений** - выбор оптимального порядка JOIN
4. **Устранение избыточных операций** - удаление ненужных узлов
5. **Преобразование подзапросов** - оптимизация вложенных запросов
6. **Упрощение выражений** - константное свертывание и упрощение

## Использование

Планировщик является промежуточным этапом между созданием логического плана и генерацией физического:

```
SQL Parser → Transformer → Logical Plan
  → Planner (оптимизация) → Optimized Logical Plan
  → Physical Plan Generator → Physical Plan
```

Оптимизированный логический план:
- Более эффективен для выполнения
- Сохраняет семантическую эквивалентность исходному запросу
- Учитывает структуру данных и доступные индексы
